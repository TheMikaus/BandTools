# PolyRhythmMetronome Android v1.6.0 - Test Plan

## Test Plan Overview

This test plan covers the major changes in v1.6.0:
1. Subdivision 1 support
2. Per-layer threading architecture
3. AudioTrack reliability improvements

## Prerequisites

- Android device (Kindle Fire HD 10 or similar)
- PolyRhythmMetronome Android app v1.6.0 installed
- Quiet environment for audio testing
- Headphones or speakers for stereo testing

---

## Test Suite 1: Subdivision 1 Support

### Test 1.1: Subdivision 1 Available in UI
**Priority:** High  
**Type:** Functional

**Steps:**
1. Launch the app
2. Add a new layer (left or right)
3. Tap the subdivision spinner

**Expected Result:**
- Subdivision options include "1" as the first option
- Full list: ["1", "2", "3", "4", "5", "6", "7", "8", "16", "32", "64"]

**Pass/Fail:** _______

### Test 1.2: Subdivision 1 Timing at 60 BPM
**Priority:** High  
**Type:** Functional

**Steps:**
1. Create new pattern (NEW button)
2. Set BPM to 60
3. Add one left layer with subdivision 1
4. Start metronome
5. Use stopwatch to time intervals between beats

**Expected Result:**
- Beats occur every 2.0 seconds (±0.1s)
- Consistent timing over 30 seconds
- 15 beats in 30 seconds

**Pass/Fail:** _______

### Test 1.3: Subdivision 1 Timing at 120 BPM
**Priority:** High  
**Type:** Functional

**Steps:**
1. Set BPM to 120
2. Add one left layer with subdivision 1
3. Start metronome
4. Time intervals between beats

**Expected Result:**
- Beats occur every 1.0 second (±0.05s)
- Consistent timing over 30 seconds
- 30 beats in 30 seconds

**Pass/Fail:** _______

---

## Test Suite 2: Per-Layer Threading

### Test 2.1: Single Layer Independent Timing
**Priority:** Critical  
**Type:** Functional

**Steps:**
1. Create new pattern
2. Add one left layer, subdivision 4 (quarter notes)
3. Set BPM to 120
4. Start metronome
5. Listen for 60 seconds

**Expected Result:**
- Consistent timing: beats every 0.5 seconds
- No timing drift
- No missed beats
- No unexpected delays

**Pass/Fail:** _______

### Test 2.2: Two Layers Independent Timing
**Priority:** Critical  
**Type:** Functional

**Steps:**
1. Create new pattern
2. Add left layer: subdivision 4 (quarter notes)
3. Add right layer: subdivision 3 (triplets)
4. Set BPM to 120
5. Start metronome
6. Listen for 60 seconds

**Expected Result:**
- Left layer: consistent 0.5s intervals (quarter notes)
- Right layer: consistent 0.667s intervals (triplets)
- Each layer maintains timing independently
- Occasional overlap is natural (polyrhythm)
- No drift in either layer

**Pass/Fail:** _______

### Test 2.3: Multiple Layers (4 layers)
**Priority:** High  
**Type:** Performance

**Steps:**
1. Create new pattern
2. Add 2 left layers: subdivision 4 and 8
3. Add 2 right layers: subdivision 3 and 6
4. Set BPM to 140
5. Start metronome
6. Listen for 120 seconds

**Expected Result:**
- All 4 layers maintain independent timing
- No timing interference between layers
- No audio glitches or dropouts
- CPU usage reasonable (check device temperature)

**Pass/Fail:** _______

### Test 2.4: Stress Test (8+ layers)
**Priority:** Medium  
**Type:** Performance

**Steps:**
1. Create new pattern
2. Add 4 left layers: subdivisions 1, 3, 5, 7
3. Add 4 right layers: subdivisions 2, 4, 6, 8
4. Set BPM to 160
5. Start metronome
6. Monitor for 180 seconds

**Expected Result:**
- All layers play without missing beats
- Timing remains consistent across all layers
- No performance degradation over time
- App remains responsive
- Device doesn't overheat

**Pass/Fail:** _______

### Test 2.5: Subdivision 3 with Multiple Layers
**Priority:** Critical  
**Type:** Regression

**Steps:**
1. Create new pattern
2. Add left layer: subdivision 3
3. Add right layer: subdivision 4
4. Set BPM to 120
5. Start metronome
6. Use stopwatch to time subdivision 3 intervals

**Expected Result:**
- Subdivision 3 beats occur every 0.667 seconds (±0.05s)
- Timing remains consistent even with subdivision 4 layer active
- No uneven spacing between triplet beats
- Subdivision 4 doesn't affect subdivision 3 timing

**Pass/Fail:** _______

### Test 2.6: Muted Layer Doesn't Affect Timing
**Priority:** High  
**Type:** Functional

**Steps:**
1. Create pattern with 2 left layers (both subdivision 4)
2. Mute one layer
3. Start metronome
4. Observe unmuted layer timing
5. Unmute the muted layer
6. Observe if timing changes

**Expected Result:**
- Unmuted layer maintains consistent timing when other is muted
- No timing change when unmuting the second layer
- Both layers stay synchronized when both playing

**Pass/Fail:** _______

---

## Test Suite 3: AudioTrack Reliability

### Test 3.1: Tone Consistency - Single Layer
**Priority:** Critical  
**Type:** Functional

**Steps:**
1. Create new pattern
2. Add one left layer in tone mode (880 Hz)
3. Set subdivision to 4
4. Set BPM to 120
5. Start metronome
6. Listen carefully for 60 seconds, counting beats

**Expected Result:**
- Every beat produces clear tone
- No silent beats
- No glitches or clicks
- No incomplete tones
- 120 clear beats in 60 seconds

**Pass/Fail:** _______

### Test 3.2: Tone Consistency - Fast Tempo
**Priority:** High  
**Type:** Functional

**Steps:**
1. Create new pattern
2. Add one left layer in tone mode
3. Set subdivision to 16 (sixteenth notes)
4. Set BPM to 160
5. Start metronome
6. Listen for 30 seconds

**Expected Result:**
- All beats play clearly at high speed
- No dropouts or missed beats
- Clean tone without distortion
- Consistent volume across all beats

**Pass/Fail:** _______

### Test 3.3: Tone Consistency - Multiple Simultaneous Tones
**Priority:** High  
**Type:** Functional

**Steps:**
1. Create new pattern
2. Add 4 left layers in tone mode:
   - Layer 1: 440 Hz, subdivision 4
   - Layer 2: 550 Hz, subdivision 4
   - Layer 3: 660 Hz, subdivision 4
   - Layer 4: 880 Hz, subdivision 4
3. Set BPM to 120
4. Start metronome
5. Listen for 60 seconds

**Expected Result:**
- All 4 tones play simultaneously on each beat
- No missing tones
- Clear harmonic blend
- No clicks or pops when tones overlap

**Pass/Fail:** _______

### Test 3.4: Tone Consistency - Different Frequencies
**Priority:** Medium  
**Type:** Functional

**Steps:**
1. Test multiple frequencies sequentially:
   - 220 Hz (low)
   - 440 Hz (standard A)
   - 880 Hz (high A)
   - 1760 Hz (very high)
2. For each frequency:
   - Create layer with that frequency
   - Set subdivision 4, BPM 120
   - Play for 20 seconds

**Expected Result:**
- All frequencies play clearly
- No frequency-dependent dropouts
- Volume consistent across frequencies
- No distortion at any frequency

**Pass/Fail:** _______

### Test 3.5: Tone Consistency - Extended Session
**Priority:** High  
**Type:** Reliability

**Steps:**
1. Create pattern with 2 tone layers (subdivisions 3 and 4)
2. Set BPM to 140
3. Start metronome
4. Let play for 10 minutes
5. Count any missed/glitchy beats

**Expected Result:**
- No missed beats in 10 minutes
- Timing remains consistent throughout
- No audio degradation over time
- No memory leaks or crashes

**Pass/Fail:** _______

### Test 3.6: Tone vs Drum Mode Reliability
**Priority:** Medium  
**Type:** Comparison

**Steps:**
1. Test tone mode:
   - Create layer in tone mode (880 Hz)
   - Play for 60 seconds
   - Count missed beats
2. Test drum mode:
   - Change same layer to drum mode (snare)
   - Play for 60 seconds
   - Count missed beats

**Expected Result:**
- Both modes have 0 missed beats
- Both modes have consistent playback
- No noticeable reliability difference between modes

**Pass/Fail:** _______

---

## Test Suite 4: Integration Tests

### Test 4.1: Save/Load with Subdivision 1
**Priority:** High  
**Type:** Functional

**Steps:**
1. Create pattern with layer using subdivision 1
2. Save pattern with a unique name
3. Create new pattern
4. Load the saved pattern
5. Verify subdivision is still 1

**Expected Result:**
- Subdivision 1 saves correctly
- Subdivision 1 loads correctly
- Pattern plays identically after load

**Pass/Fail:** _______

### Test 4.2: Auto-Restart with Layer Changes
**Priority:** High  
**Type:** Functional

**Steps:**
1. Start metronome with 2 layers
2. Add a new layer while playing
3. Observe if metronome restarts automatically
4. Delete a layer while playing
5. Observe if metronome restarts automatically

**Expected Result:**
- Metronome restarts when layer added
- New layer plays immediately
- Metronome restarts when layer deleted
- No manual stop/start needed

**Pass/Fail:** _______

### Test 4.3: Master Volume with Multiple Threads
**Priority:** Medium  
**Type:** Functional

**Steps:**
1. Create pattern with 4 layers (different frequencies)
2. Start metronome
3. Adjust master volume slider
4. Stop and restart metronome
5. Verify volume change took effect

**Expected Result:**
- Volume applies to all layers uniformly
- Stopping/starting applies new volume
- No volume inconsistencies between layers

**Pass/Fail:** _______

---

## Test Suite 5: Edge Cases

### Test 5.1: Start/Stop Rapidly
**Priority:** Medium  
**Type:** Stability

**Steps:**
1. Create pattern with 3 layers
2. Start metronome
3. Immediately stop (within 0.5s)
4. Repeat start/stop 10 times rapidly
5. Check for any errors or crashes

**Expected Result:**
- No crashes
- All threads cleanup properly
- No audio artifacts lingering
- App remains responsive

**Pass/Fail:** _______

### Test 5.2: Change Subdivisions While Playing
**Priority:** Low  
**Type:** Functional

**Steps:**
1. Create pattern with 2 layers
2. Start metronome
3. Change subdivision of a layer
4. Observe behavior

**Expected Result:**
- Metronome auto-restarts with new subdivision
- New timing takes effect immediately
- No audio glitches during transition

**Pass/Fail:** _______

### Test 5.3: Zero Layers
**Priority:** Low  
**Type:** Edge Case

**Steps:**
1. Create new pattern
2. Delete all layers (both left and right)
3. Press Play

**Expected Result:**
- Metronome "runs" but plays no sounds
- No crashes or errors
- Can add layers while "playing"
- Stop button still works

**Pass/Fail:** _______

### Test 5.4: Very Slow BPM (40) with Subdivision 1
**Priority:** Low  
**Type:** Edge Case

**Steps:**
1. Create pattern with subdivision 1
2. Set BPM to 40 (minimum)
3. Start metronome
4. Time intervals with stopwatch

**Expected Result:**
- Beats occur every 3.0 seconds
- Timing remains accurate over 2 minutes
- No timing drift
- 40 beats in ~120 seconds

**Pass/Fail:** _______

### Test 5.5: Very Fast BPM (240) with Subdivision 32
**Priority:** Low  
**Type:** Performance

**Steps:**
1. Create pattern with subdivision 32
2. Set BPM to 240 (maximum)
3. Start metronome
4. Observe for 30 seconds

**Expected Result:**
- Extremely rapid beats (32 per second)
- No missed beats
- No audio distortion
- Device doesn't freeze or crash

**Pass/Fail:** _______

---

## Test Suite 6: Regression Tests

### Test 6.1: Accent Beats Still Work
**Priority:** High  
**Type:** Regression

**Steps:**
1. Create pattern with subdivision 4
2. Set beats per measure to 4
3. Adjust accent volume to 2.0
4. Start metronome
5. Listen for first beat of each measure

**Expected Result:**
- First beat of measure is louder (accent)
- Other beats are normal volume
- Accent pattern repeats every 4 beats

**Pass/Fail:** _______

### Test 6.2: Accent Frequency Still Works
**Priority:** High  
**Type:** Regression

**Steps:**
1. Create tone layer
2. Set regular freq to 440 Hz
3. Set accent freq to 880 Hz
4. Set beats per measure to 4
5. Start metronome

**Expected Result:**
- First beat plays at 880 Hz
- Other beats play at 440 Hz
- Pattern repeats correctly

**Pass/Fail:** _______

### Test 6.3: MP3 Ticks Still Work
**Priority:** High  
**Type:** Regression

**Steps:**
1. Create layer in mp3_tick mode
2. Select an MP3 tick sound
3. Start metronome

**Expected Result:**
- MP3 tick plays on each beat
- Clear audio playback
- No crashes or errors

**Pass/Fail:** _______

### Test 6.4: Visual Flashing Still Works
**Priority:** Medium  
**Type:** Regression

**Steps:**
1. Create pattern with 2 different colored layers
2. Start metronome
3. Observe layer visual feedback

**Expected Result:**
- Each layer flashes its color on its beats
- Flash timing matches audio beats
- Different layers have different flash colors

**Pass/Fail:** _______

---

## Performance Benchmarks

### CPU Usage Test
**Steps:**
1. Monitor CPU usage with 1, 2, 4, and 8 layers
2. Record percentage at each level

**Results:**
- 1 layer: _____%
- 2 layers: _____%
- 4 layers: _____%
- 8 layers: _____%

**Expected:** Linear increase, total < 20% with 8 layers

### Memory Usage Test
**Steps:**
1. Monitor memory before start
2. Start with 8 layers
3. Run for 5 minutes
4. Check memory usage

**Results:**
- Before start: _____ MB
- After 5 min: _____ MB
- Increase: _____ MB

**Expected:** Increase < 10 MB

### Battery Usage Test
**Steps:**
1. Charge device to 100%
2. Run metronome with 4 layers for 60 minutes
3. Record battery percentage

**Results:**
- Battery drain: _____%

**Expected:** < 15% drain per hour

---

## Test Summary

**Total Tests:** 42  
**Critical Priority:** 9  
**High Priority:** 17  
**Medium Priority:** 11  
**Low Priority:** 5  

**Tests Passed:** _______  
**Tests Failed:** _______  
**Tests Blocked:** _______  
**Tests Skipped:** _______  

**Overall Pass Rate:** _______%

---

## Known Issues

Document any issues found during testing:

1. Issue: _______________________  
   Priority: _______  
   Workaround: _______  

2. Issue: _______________________  
   Priority: _______  
   Workaround: _______  

---

## Sign-Off

**Tester Name:** _________________  
**Date:** _________________  
**Device:** _________________  
**Android Version:** _________________  
**App Version:** 1.6.0  

**Recommendation:**
- [ ] Approved for release
- [ ] Approved with minor issues
- [ ] Not approved - major issues found

**Comments:**
_____________________________________________________________
_____________________________________________________________
_____________________________________________________________
